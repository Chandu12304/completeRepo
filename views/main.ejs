<!-- root/views/home.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Home</title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="/images/fa.jpg" type="favicon">
    <style>
        .tooltip {
            position: absolute;
            background-color: rgba(208, 180, 180, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            display: none;
            z-index: 10;
            top: 10px;
            left: 10px;
        }

        .product-card {
            position: relative;
        }

        .product-card:hover .tooltip {
            display: block;
        }

        .count-display {
            display: none;
        }

        .product-card:hover .count-display {
            display: inline;
        }
    </style>
</head>

<body>
    <header
        class="fixed top-0 left-0 right-0 flex justify-around items-center p-5 bg-black bg-opacity-40 shadow-lg z-50 backdrop-blur-md">
        <img src="/images/fa.jpg" alt="loading-icon" width="50px" height="50px">
        <div class="text-white text-xl">Binary Coders</div>
        <nav class="hidden lg:flex items-center space-x-4">
            <a href="#home" class="text-white hover:text-orange-400">HOME</a>
            <span class="text-white">/</span>
            <a href="<%= profileExists ? '/html/afterLoginDashboard.html' : '/html/firstDashboard.html' %>"
                class="text-white hover:text-orange-400" id="profile">PROFILE</a>
            <span class="text-white">/</span>
            <a href="#accessories" class="text-white hover:text-orange-400">COLLECTIONS</a>
            <span class="text-white">/</span>
            <a href="#contact" class="text-white hover:text-orange-400">CONTACT</a>
        </nav>
        <div class="hidden lg:flex items-center space-x-4">
            <form action="/home" method="GET">
                <button type="submit"
                    class="bg-transparent text-gray-200 border border-white rounded-full px-6 py-2 hover:bg-orange-500">Log
                    out</button>
            </form>
        </div>

        <div class="text-2xl text-white">
            <div class="lightMode">
                <i class="fa-solid fa-sun"></i>
            </div>
            <div class="darkMode hidden">
                <i class="fa-solid fa-moon"></i>
            </div>
        </div>


        <div class="lg:hidden sidebar"></div>
        <div class="hamburger cursor-pointer text-white text-2xl" aria-label="Open Menu">
            <i class="fa-solid fa-bars"></i>
        </div>
        <div class="arrows-cross cursor-pointer text-white text-2xl hidden" aria-label="Close Menu">
            <i class="fa-solid fa-x"></i>
        </div>
        </div>
    </header>

    <nav class="bg-black bg-opacity-40 shadow-lg backdrop-blur-md" id="responsive">
        <a href="#home" class=".margin-top text-white hover:text-orange-400">HOME</a>
        <a href="<%= profileExists ? '/html/afterLoginDashboard.html' : '/html/firstDashboard.html' %>"
            class="text-white hover:text-orange-400" id="profile">PROFILE</a>
        <a href="#accessories" class="text-white hover:text-orange-400">COLLECTIONS</a>
        <a href="#contact" class="text-white hover:text-orange-400">CONTACT</a>
        <div class="flex items-center space-x-4">
            <form action="/auth" method="GET">
                <button type="submit"
                    class="bg-transparent text-gray-200 border border-white rounded-full px-6 py-2 hover:bg-orange-500">Log
                    out
                </button>
            </form>
        </div>
    </nav>

    <script>
        // Get references to the elements
        const hamburger = document.querySelector('.hamburger');
        const closeIcon = document.querySelector('.arrows-cross');
        const responsive = document.getElementById('responsive');

        // Function to open the responsive navigation
        hamburger.addEventListener('click', () => {
            responsive.style.display = 'flex'; // Show the nav
            hamburger.classList.add('hidden'); // Hide the hamburger icon
            closeIcon.classList.remove('hidden'); // Show the close icon
        });

        // Function to close the responsive navigation
        closeIcon.addEventListener('click', () => {
            responsive.style.display = 'none'; // Hide the nav
            hamburger.classList.remove('hidden'); // Show the hamburger icon
            closeIcon.classList.add('hidden'); // Hide the close icon
        });
    </script>



    <main class="main" id="home">

        <div class="main-content" id="maincnt">
            <h3>WELCOME BACK TO YOUR WARDROBE</h3>
            <h2>MAKE EVER<span class="glow">Y </span>ITE<span class="glow">M C</span>OU<span class="glow">NT</span>
            </h2>
            <a href="#accessories" class="cta-button">SEE YOUR COLLECTIONS</a>
        </div>
    </main>
    <section id="accessories" class="py-10">
        <div class="relative bg-cover bg-center py-16" style="background-image: url('./');">

            <!-- Overlay to Darken the Background for Text Readability -->
            <div class="absolute inset-0 opacity-50"></div>

            <div class="relative max-w-7xl mx-auto px-4">
                <!-- Header Section -->
                <div class="text-center mb-10">
                    <div class="fixed bottom-4 left-4 p-4 bg-white border border-gray-300 rounded-lg shadow-lg flex items-center space-x-2 transition-transform transform hover:scale-105"
                        style="z-index: 10;">
                        <div class="flex-shrink-0">
                            <!-- Icon (optional) -->
                            <svg class="h-6 w-6 text-orange-500" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10 2a8 8 0 00-8 8v4h1v-4a7 7 0 0114 0v4h1v-4a8 8 0 00-8-8zM5 10a5 5 0 1110 0A5 5 0 015 10z" />
                            </svg>
                        </div>
                        <div>
                            <p class="text-gray-800">Create your profile and open your wardrobe door!</p>
                        </div>
                        <button class="ml-2 text-orange-500 hover:text-orange-700 focus:outline-none"
                            onclick="this.parentElement.style.display='none';">‚úï</button>
                    </div>

                    <!-- Media query for small screens -->
                    <style>
                        @media (max-width: 640px) {
                            .fixed.bottom-4.left-4 {
                                bottom: 8rem;
                                /* Push up to avoid overlapping with the chatbot icon */
                                left: 1rem;
                                right: 1rem;
                                width: auto;
                                /* Ensures that it scales properly on smaller screens */
                            }

                            .fixed.bottom-4.left-4 button {
                                position: relative;
                                /* Ensures the button stays in the flow */
                                top: 0;
                                /* Adjust button positioning if necessary */
                            }
                        }
                    </style>

                    <h2 class="text-4xl font-bold uppercase tracking-wide text-orange-500">Your Collection</h2>
                    <p class="mt-4 text-gray-300 uppercase">Organize and customize your collection to elevate your
                        wardrobe!
                    </p>
                </div>

                <!-- Product Cards Section -->
                <div id="product-container" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Product Card 1 -->
                    <div class="bg-[#2d2d2d] shadow-lg rounded-lg p-6">
                        <img src="/images/shirts.jpg" alt="Clothes" class="w-full h-48 object-cover rounded">
                        <div class="mt-4 text-center">
                            <h3 class="text-lg font-semibold text-gray-300">Clothes</h3>
                            <p class="text-sm text-gray-400">Items in Collection: <span id="tooltip-count-1"
                                    class="text-orange-500">
                                    <%= clothesCount %>
                                </span></p>
                        </div>
                    </div>

                    <!-- Product Card 2 -->
                    <div class="bg-[#2d2d2d] shadow-lg rounded-lg p-6">
                        <img src="/images/gadgets.jpg" alt="Gadgets" class="w-full h-48 object-cover rounded">
                        <div class="mt-4 text-center">
                            <h3 class="text-lg font-semibold text-gray-300">Gadgets</h3>
                            <p class="text-sm text-gray-400">Items in Collection: <span id="tooltip-count-2"
                                    class="text-orange-500">
                                    <%= gadgetsCount %>
                                </span></p>
                        </div>
                    </div>

                    <!-- Product Card 3 -->
                    <div class="bg-[#2d2d2d] shadow-lg rounded-lg p-6">
                        <img src="/images/miscel.jpg" alt="Miscellaneous" class="w-full h-48 object-cover rounded">
                        <div class="mt-4 text-center">
                            <h3 class="text-lg font-semibold text-gray-300">Miscellaneous</h3>
                            <p class="text-sm text-gray-400">Items in Collection: <span id="tooltip-count-3"
                                    class="text-orange-500">
                                    <%= miscCount %>
                                </span></p>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center mt-6">
                    <a href="<%= profileExists ? '/html/afterLoginDashboard.html' : '/html/firstDashboard.html' %>"
                        class="cta-button bg-orange-500 text-white px-6 py-3 rounded hover:bg-orange-600">
                        OPEN YOUR WARDROBE!
                    </a>
                </div>

            </div>
        </div>
    </section>


    <!-- Add more product cards as needed, following the same structure -->
    <section class="text-center mb-10">
        <div class="relative max-w-7xl mx-auto px-4"> <!-- Added container for same width -->
            <h2 class="text-4xl font-bold uppercase tracking-wide text-orange-500">Used dress sale and resale</h2>
            <p class="mt-4 text-gray-300 uppercase pb-10">Shop sustainably: buy and sell pre-loved dresses for less!</p>
        </div>
    </section>



    <!-- Main container -->
    <div class="max-w-7xl mx-auto py-16 flex flex-col items-center bg-cover bg-center"
        style="background-image: url('/images/extrabg.jpg'); background-size: cover; background-attachment: fixed;">

        <div class="grid md:grid-cols-2 gap-8 w-full px-4 md:px-8">
            <!-- Left Side: Image -->
            <div class="flex justify-center">
                <div class="w-full h-60 md:h-80 bg-cover bg-center rounded-lg shadow-lg"
                    style="background-image: url('/images/used.jpg');"></div>
            </div>

            <!-- Right Side: Details -->
            <div
                class="flex flex-col justify-center text-center bg-gray-900 bg-opacity-80 rounded-lg shadow-lg px-4 py-8">
                <p class="text-lg text-gray-200 mb-4">Explore our curated collection of pre-loved dresses, perfect for
                    those looking to buy stylish outfits at affordable prices.</p>
                <p class="text-lg text-gray-200 mb-4">By purchasing second-hand, you‚Äôre contributing to sustainability
                    and reducing waste.</p>
                <form action="/RealChat" method="GET">
                    <button
                        class="mt-4 bg-orange-500 hover:bg-orange-600 text-white font-bold py-1 rounded transition duration-300 text-sm"
                        type="submit">Shop Now</button>
                </form>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-8 mt-16 w-full px-4 md:px-8">
            <!-- Left Side: Details -->
            <div
                class="flex flex-col justify-center text-center bg-gray-900 bg-opacity-80 rounded-lg shadow-lg px-4 py-8">
                <p class="text-lg text-gray-200 mb-4">Looking to donate your dresses? Join us in making a difference by
                    donating your gently used dresses for a good cause.</p>
                <p class="text-lg text-gray-200 mb-4">Your contribution can help someone in need while giving your dress
                    a new life.</p>
                <form action="/scroll" method="GET">
                    <button
                        class="mt-4 bg-orange-500 hover:bg-orange-600 text-white font-bold py-1 rounded transition duration-300 text-sm"
                        type="submit">Donate Now</button>
                </form>
            </div>

            <!-- Right Side: Image -->
            <div class="flex justify-center">
                <div class="w-full h-60 md:h-80 bg-cover bg-center rounded-lg shadow-lg"
                    style="background-image: url('/images/donation.jpg');"></div>
            </div>
        </div>

        <!-- New Section: Sustainable Fashion -->
        <div class="grid md:grid-cols-2 gap-8 mt-16 w-full px-4 md:px-8">
            <!-- Left Side: Image -->
            <div class="flex justify-center">
                <div class="w-full h-60 md:h-80 bg-cover bg-center rounded-lg shadow-lg"
                    style="background-image: url('/images/sus.jpg');"></div>
            </div>

            <!-- Right Side: Details -->
            <div
                class="flex flex-col justify-center text-center bg-gray-900 bg-opacity-80 rounded-lg shadow-lg px-4 py-8">
                <p class="text-lg text-gray-200 mb-4">Embrace sustainable fashion by choosing second-hand dresses. Save
                    money and help the planet.</p>
                <p class="text-lg text-gray-200 mb-4">Your style can make a statement while supporting eco-friendly
                    practices.</p>
                <button
                    class="mt-4 bg-orange-500 hover:bg-orange-600 text-white font-bold py-1 rounded transition duration-300 text-sm"
                    type="submit">Discover more</button>
            </div>
        </div>

    </div>




    <div class="map">
        <h2 class="text-4xl font-bold uppercase text-center my-6 text-orange-500">Location</h2>
        <p class=" text-gray-300 uppercase pb-10 text-center">Visit us at our store for a delightful offline
            experience!
        </p>
        <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d10749.381974317792!2d77.5903259520513!3d12.972989944482016!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bae1672fcfc6af1%3A0x9c2dc517c9231979!2sUVCE!5e0!3m2!1sen!2sin!4v1726765627401!5m2!1sen!2sin"
            width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"></iframe>

    </div>
    <footer class="footer" id="contact">
        <div class="container">
            <a href="#" class="Brand text-orange-500 hover:text-orange-600">Binary Coders</a>
            <ul class="footm">
                <li><a href="#home">Home</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#work">Works</a></li>
                <li><a href="#latestnews">latest News</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <ul class="media-icons">
                <li><a href="#"><i class="fab fa-facebook"></i></a></li>
                <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                <li><a href="#"><i class="fab fa-instagram"></i></a></li>
                <li><a href="#"><i class="fab fa-linkedin"></i></a></li>
            </ul>
            <p> University of Visvesvarya college of Engineering <br> K R Circle , Bangalore 560001 <br> Contact
                no.: 1234567891</p>
        </div>
    </footer>

    <!-- chatbot -->
    <div class="chat-container">
        <div class="card" id="chatCard">
            <div id="header">
                <h1>Chat Box</h1>
                <button class="close-btn" onclick="toggleChat()">√ó</button>
            </div>
            <div id="message-section">
                <div class="message bot"><span class="message-text">Hello! How can I help you?</span></div>
            </div>
            <div id="loading" class="loading-icon" style="display: none;">‚è≥</div>
            <div id="input-section">
                <input id="input" type="text" placeholder="Type a message" autocomplete="off">
                <button class="send" onclick="sendMessage()">Send</button>
            </div>
        </div>
        <button class="message-icon" onclick="toggleChat()">üí¨</button>
    </div>
    </div>
    <script>
        var darkMode = document.querySelector(".darkMode");
        var lightMode = document.querySelector(".lightMode");
        var footer = document.querySelector(".footer");
        var footerParagraphs = document.querySelectorAll(".footer p");
        var footerLinks = document.querySelectorAll(".footer a");

        darkMode.onclick = function () {
            document.body.style.backgroundColor = "#323232";
            document.body.style.color = "white";
            lightMode.style.display = "block";
            darkMode.style.display = "none";
            sectiontitle.style.color = "white";

            // Footer styles for dark mode
            footer.style.backgroundColor = "#1a1a1a"; // Dark background for footer
            footerParagraphs.forEach(function (p) {
                p.style.color = "#ccc"; // Light gray color for footer text
            });
            footerLinks.forEach(function (a) {
                a.style.color = "#fff"; // White color for links in dark mode
            });
        }

        lightMode.onclick = function () {
            document.body.style.backgroundColor = "#f9f9f9";
            document.body.style.color = "#1f2937";
            lightMode.style.display = "none";
            darkMode.style.display = "block";
            sectiontitle.style.color = "black";

            // Footer styles for light mode
            footer.style.backgroundColor = "#AEC6CF"; // Light background for footer
            footerParagraphs.forEach(function (p) {
                p.style.color = "#555"; // Darker text for light mode
            });
            footerLinks.forEach(function (a) {
                a.style.color = "#1f2937"; // Dark color for links in light mode
            });
        }

        //code for push notification

        let interval;
        let notification; // Declare `notification` globally to avoid issues with reassignment

        // Request permission for notifications
        Notification.requestPermission().then(perm => {
            if (perm === "granted") {
                try {
                    notification = new Notification("Binary Innovation", {
                        body: "Welcome to the Binary Innovation",
                        tag: "Give us feed back", // Use a unique tag to avoid stacking
                        icon: "/images/fa.jpg",
                    });

                    notification.addEventListener("error", e => {
                        console.error("Notification error event:", e);
                    });
                } catch (e) {
                    console.error("Failed to create notification: " + e.message);
                }
            } else {
                console.warn("Notification permissions were denied.");
            }
        });
    </script>

    <script src="/js/homeScript.js"></script>
    <script src="/js/chatbotScript.js"></script>

</body>

</html>
